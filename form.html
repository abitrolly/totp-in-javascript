<!DOCTYPE HTML>
<html lang=en>
<title>a simple TOTP generator</title>
<meta charset=utf-8>
<meta name=viewport content=width=device-width,initial-scale=1>
<style>
#error { font-weight: bold; color: red; display: block; height: 1em }
#key:invalid { background-color: red; color: pink }
#code { font-family: monospace; font-size: 250%; letter-spacing: .15em }
#code::after { all: initial; content: ' ' attr(title); color: red }
#code[title^=copied]::after { color: green }

input, button { font: inherit }
#user, #key { box-sizing: border-box; width: 100%; max-width: 25em }
button { max-width: max-content }
#add { display: none }

.popup *, .popup ~ * { display: none }
.popup #user, .popup #code { all: revert }
.popup #user { display: block; margin: .5em 0 }
.popup #code::after { font-size: 80% }
.popup #add { display: inline; float: right }
</style>

<form>
  <label for=user>User</label><br>
  <input id=user size=24 autocomplete=username>
  <p>
    <label for=key>Shared Key</label>
    <label><input type=checkbox id=show>show</label><br>
    <input id=key size=24 autocomplete=current-password type=password pattern="[a-zA-Z2-7\s]+">
    <output for=key id=error></output>
  </p>
  <output for=key id=code>XXXXXX</output>
  <a id=add href target=_blank>add key</a>
  <p><button type=button id=generate>Generate TOTP (and copy it to clipboard)</button>
  <p><button>Save the key (with the browser's password manager)</button>
</form>

<p>The TOTP shared key should be in base32 format, e.g. <code>TK7P33KPE527ZTOX</code> (github) or <code>opid zgaw quda ip7q tj3z izo7 oemp t7dm</code> (google).

<p>The <q>User</q> field is not used for computing the TOTP; its only purpose is to act as a label for the password manager.

<p>If the <q>Save..</q> button does not pop up the <q>Save login/password</q> dialog, look for a key-like icon in the address bar or password input box and click on it. If there's no such icon, check if your browser's settings prevent it from saving passwords on this page.
<script src=form.js></script>
<script src=totp.js></script>
